$def with (user, items)
<?xml version="1.0" encoding="UTF-8"?>

<rss version="2.0">
  <channel>
    <title>$user.get_persona()'s TF2 Backpack</title>
    <generator>$project_name</generator>
    <link>${instance.homedomain}${virtual_root}</link>
    <image>
      <link>${instance.homedomain}${virtual_root}</link>
      <url>${instance.homedomain}${static_prefix}optf2_icon.png</url>
      <title>$project_name</title>
    </image>
  $items.reverse()
  $for item in items:
      <item>
        $ permalink = "{0}{1}item/{2}".format(instance.homedomain, virtual_root, item.get_id())
        $ level = item.optf2["level"]
        $ type = item.optf2["type"]
        $ name = item.get_custom_name()
        $ image = item.optf2["image_url"]
        $if not name:
            $ name = item.get_name()
        <description>Level $level $type</description>
        <title>$:item.optf2["feed_name"]</title>
        <link>$permalink</link>
        <guid isPermaLink="true">$permalink</guid>
        <enclosure type="image/png" length="0" url="$image"/>
      </item>
  </channel>
</rss>
