$def with (pack, items, filter_classes, attrdump = None)
$var title: $project_name - All Items

<div id="header">
  $if attrdump:
      <h2>$attrdump</h2>
      <h5><a href="${virtual_root}attrib_dump#${encode_url(attrdump.replace(' ', '_'))}">Back to table</a></h5>
  $else:
      <h2>All items in TF2</h2>
      <div class="sortlinks">
        Filter:
        <a href="$qurl(sortclass = None)"><img src="${static_prefix}tf_icon.png" alt="All" title="All"/></a>
        $for k in filter_classes:
            <a href="$qurl(sortclass = k)">
              <img src="${static_prefix}${k}_icon.png" alt="${k}" title="${k}"/>
            </a>
      </div>
</div>
<div id="content">
  <div id="backpack">
  $for item in items:
      $ item_link = "{0}item/{1}".format(virtual_root, pack.get_item_schema_id(item))
      $ qitem = pack.get_item_quality(item)["str"]
      $ painty = item.get("optf2_painted_text", "")
      $ item_id = pack.get_item_schema_id(item)
      <div class="item_cell" id="s${item_id}">
        $:item["optf2_cell_name"]
        <div class="item_level">Level $item["optf2_level"] $:painty $pack.get_item_type(item)</div>
        <a class="item_link" href="$item_link">
          <img class="item_image_small" src="$item['optf2_image_url']" alt="$pack.get_item_name(item)"/>
        </a>
        <div class="item_attribs">
          $if item["optf2_description"]:
              <div class="item_neutral_attr" style="font-weight: normal;">
                $item["optf2_description"]
              </div>
          $for attr in item["optf2_attrs"]:
              <div class="item_${pack.get_attribute_type(attr)}_attr">
                $:pack.format_attribute_description(attr).replace("\n", "<br/>")
              </div>
          $if item["optf2_untradeable"]:
              <div class="item_neutral_attr">
                Untradeable
              </div>
        </div>
      </div>
  </div>
</div>
<div id="footer">
  Valve says I should link to <a href="http://steampowered.com">this</a>.
</div>
