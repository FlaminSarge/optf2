$def with (items, filter_classes, attrdump = None)
$var title: $project_name - All Items

<div id="header">
  $if attrdump:
      <h2>$attrdump</h2>
      <h5><a href="${virtual_root}attrib_dump#${encode_url(attrdump.replace(' ', '_'))}">Back to table</a></h5>
  $else:
      <h2>All items in TF2</h2>
      <div class="sortlinks">
        Filter:
        <a href="$qurl(sortclass = None)"><img src="${static_prefix}tf_icon.png" alt="All" title="All"/></a>
        $for k in filter_classes:
            <a href="$qurl(sortclass = k)">
              <img src="${static_prefix}${k}_icon.png" alt="${k}" title="${k}"/>
            </a>
      </div>
</div>
<div id="content">
  <div id="backpack">
  $for item in items:
      $ item_link = "{0}item/{1}".format(virtual_root, item.get_schema_id())
      $ qitem = item.get_quality()["str"]
      $ painty = item.optf2.get("painted_text", "")
      $ item_id = item.get_schema_id()
      <div class="item_cell cell-${qitem}" id="s${item_id}">
        <a class="item_link" href="$item_link">
          <img class="item-image small" src="$item.optf2['image_url']" alt="$item.get_name()"/>
        </a>
        $if "color" in item.optf2:
            <span class="paint_splotch" style="background: $item.optf2['color'];">&nbsp;</span>
        <div class="item_attribs">
          $:item.optf2["cell_name"]
          <div class="item-level">Level $item.optf2["level"] $:painty $item.optf2["type"]</div>
          $if item.optf2["description"]:
              <div class="item-description">
                $item.optf2["description"]
              </div>
          $for attr in item.optf2["attrs"]:
              <div class="attr-${attr.get_type()}">
                $:attr.get_description_formatted().replace("\n", "<br/>")
              </div>
          $if item.is_untradable():
              <div class="attr-neutral">
                Untradable
              </div>
        </div>
      </div>
  </div>
</div>
<div id="footer">
  $project_name uses the <a href="http://steampowered.com">Steam API</a>
</div>
