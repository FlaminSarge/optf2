$def with (app, user, items, classmap, slotlist)
$ persona = user["persona"]
$ id = user["id64"]
$var title: $persona's Loadout List
$var description: List of classes and slots with equipped items owned by $persona
<div id="header">
  <h2 class="loadout-header"><a href="$markup.generate_root_url('user/{0}'.format(id), app)">$persona's</a> Loadouts</h2>
</div>
<div id="content">
  $if items:
      <div id="loadout" style="margin: 0 auto 0 auto; width: 90%;">
	$for cid, lclass in classmap:
          $if cid not in items: $continue
          <div class="autosize box" id="$lclass" style="margin: 30px auto 30px auto;">
            <div class="titlebar">
	      $:markup.generate_class_sprite_img(cid, app)
              <a href="#$lclass" style="margin-left: 10px;">$lclass</a>
            </div>
	    $ citems = items[cid]
            $for slot in slotlist:
	      $if slot not in citems: $continue
              <div class="slot-item">
                <div class="title">$slot</div>
                  $for item in citems[slot]:
                    $:markup.generate_item_cell(app, item, show_equipped = False, user = user)
              </div>
          </div>
      </div>
</div>
